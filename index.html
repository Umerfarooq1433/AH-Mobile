<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Number Tracker Pro</title>
    <script src="https://cdn.tailwindcss.com"></script>
</head>
<body class="bg-gray-100 font-sans">

    <div class="max-w-md mx-auto mt-10 p-6 bg-white rounded-xl shadow-lg border border-gray-200">
        <h2 class="text-2xl font-bold text-center text-blue-600 mb-6">Number Detail Finder</h2>
        
        <div class="space-y-4">
            <div>
                <label class="block text-sm font-medium text-gray-700">Mobile Number</label>
                <input type="text" id="mobileNumber" placeholder="e.g. 3001234567" 
                    class="w-full mt-1 p-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 outline-none">
                <p class="text-xs text-gray-500 mt-1">*Bina zero (0) ke number likhein.</p>
            </div>

            <button onclick="fetchData()" id="searchBtn"
                class="w-full bg-blue-600 text-white font-bold py-3 rounded-lg hover:bg-blue-700 transition">
                Search Details
            </button>
        </div>

        <div id="loader" class="hidden mt-4 text-center text-blue-600 font-semibold italic">
            Searching Database...
        </div>

        <div id="resultBox" class="hidden mt-6 p-4 bg-gray-50 rounded-lg border border-gray-300 animate-pulse-once">
            <h3 class="font-bold text-gray-800 border-b pb-2 mb-3">Owner Information:</h3>
            <div id="dataContent" class="text-sm space-y-2">
                </div>
        </div>

        <div id="errorBox" class="hidden mt-4 p-3 bg-red-100 text-red-700 text-sm rounded-lg text-center font-medium">
            Data nahi mil saka ya API ne block kar dia hai.
        </div>
    </div>

    <script>
        async function fetchData() {
            const number = document.getElementById('mobileNumber').value;
            const resultBox = document.getElementById('resultBox');
            const dataContent = document.getElementById('dataContent');
            const errorBox = document.getElementById('errorBox');
            const loader = document.getElementById('loader');

            if (!number || number.length < 10) {
                alert("Please enter a valid 10-digit number.");
                return;
            }

            // Reset states
            resultBox.classList.add('hidden');
            errorBox.classList.add('hidden');
            loader.classList.remove('hidden');

            const apiUrl = `https://app-api.callerid.pk/api/api_sims/api.php?number=${number}`;

            try {
                // Ham yahan proxy use kar sakte hain agar browser block kare (Optional)
                const response = await fetch(apiUrl);
                const data = await response.json();

                loader.classList.add('hidden');

                if (data && data.status === "success") {
                    resultBox.classList.remove('hidden');
                    
                    // API ke response fields ke mutabiq data set karein
                    // Note: API fields 'name', 'cnic', 'address' ho saktay hain
                    dataContent.innerHTML = `
                        <p><strong>Name:</strong> ${data.name || 'Not Found'}</p>
                        <p><strong>CNIC:</strong> ${data.cnic || 'Not Found'}</p>
                        <p><strong>Address:</strong> ${data.address || 'Not Found'}</p>
                        <p><strong>Network:</strong> ${data.network || 'Not Found'}</p>
                    `;
                } else {
                    errorBox.classList.remove('hidden');
                }
            } catch (error) {
                loader.classList.add('hidden');
                console.error("Error fetching data:", error);
                // Agar block ho jaye to direct link ka option dein
                errorBox.innerHTML = `API Request blocked. <br><a href="${apiUrl}" target="_blank" class="underline font-bold text-red-800 text-xs">Yahan click kar ke data dekhein (External Link)</a>`;
                errorBox.classList.remove('hidden');
            }
        }
    </script>

</body>
</html>
